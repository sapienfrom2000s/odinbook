<p style="color: green"><%= notice %></p>
<% post = @post%>
<%= render @post %>

<% like = Like.metadata(post, current_user) %>
<% unless like.exists? %>
<%= render partial: "likes/like_button_form", locals: {post_id: post.id} %>
<% else %>
<%= render partial: "likes/dislike_button_form", locals: {post_id: post.id, like_id: like.first.id} %>
<% end %>
<div class='likes_count'>
Likes: <%= @post.likes.count %>
</div>

<%= render partial: "edit_links", locals: { post: @post } if current_user.username == params[:username]  %>

<%= render partial: "comments/index", locals: { comments: @comments, level: 1 } %>

<style>
  .reply-form{
    display:none;
  }

  .nesting{
    margin-left: 2em;
  }
</style>
  
<script>
var replyLinks = document.querySelectorAll('.reply-link')
replyLinks.forEach(replyLink => {
  replyLink.addEventListener('click', function(e) {
    e.preventDefault()
    comment_id = e.target.parentNode.classList[1]
    document.getElementsByClassName(comment_id)[0].style.display = 'block'
  });
});
</script>